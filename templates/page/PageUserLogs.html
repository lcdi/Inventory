{% extends "base/Table.html" %}

{%block title%}
	User Logs
{%endblock%}

{% block preContent %}
	<form id='searchForm' action="/usersFilter" method="post" role="form">
		<input id="searchField" name="searchField" placeholder="jwilliams" type="text" class="form-control"/>
	</form>
{% endblock %}

{% block tableColumnsHeaders %}
	<th>Serial Number</th>
	<th>Type</th>
	<th>Purpose</th>
	<th>User Out</th>
	<th>Date Out</th>
	<th>Authorizer Out</th>
	<th>User In</th>
	<th>Date In</th>
	<th>Authorizer In</th>
{% endblock %}

{% block tableBody %}
	{% include 'page/PageUserLogs_Body.html' %}
{%endblock%}

{% block modals %}{% endblock %}

{% block scripts %}
	<script language="javascript">
		$(window).load(function() {
			var searchField = document.getElementById("searchField");
			searchField.oninput = onSearchFieldChange;
			searchField.onpropertychange = searchField.oninput;
		});
		
		var request;
		$SCRIPT_ROOT = {{ request.script_root|tojson|safe }};
		function onSearchFieldChange() {
			
			if (request) request.abort();
			
			request = $.ajax({
				url: $SCRIPT_ROOT + '/usersFilter',
				type: 'POST',
				data: {
					searchPhrase: $(this).val()
				},
				success: function(response) {
					document.getElementById('tableBody').innerHTML = response['tableBody'];
				},
				error: function(error) {
					console.log(error);
				}
			});
			
		}
	</script>
{% endblock %}
